DROP TABLE IF EXISTS Ristorante CASCADE;
DROP TABLE IF EXISTS Sala CASCADE;
DROP TABLE IF EXISTS Tavolo CASCADE;

CREATE TABLE Ristorante
(
	codR SERIAL PRIMARY KEY,
	nome VARCHAR(50),
	città VARCHAR(50),
	indirizzo VARCHAR(100),
	n°civico VARCHAR(5),
	n°sale integer,
	oraApertura integer DEFAULT 20,
	oraChiusura integer DEFAULT 22,
	CONSTRAINT unicità UNIQUE(città, indirizzo, n°civico)
);

CREATE TABLE Sala
(
	codS SERIAL PRIMARY KEY,
	n°tavoli integer,
	codR integer, 
	CONSTRAINT fk_codR FOREIGN KEY (codR) REFERENCES Ristorante(codR)
);

CREATE TABLE Tavolo
(
	codT SERIAL PRIMARY KEY,
	n°maxAvventori integer,
	codS integer,
	CONSTRAINT fk_codS FOREIGN KEY (codS) REFERENCES Sala(codS)
);